<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
#map-canvas {
  height: 100%;
}
#panel {
  position: absolute;
  top: 20px;
  left: 100px;
  z-index: 5;
  background-color: #fff;
  padding: 5px;
  border: 1px solid #999;
}
    </style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBPiZs6448XWeGOA5uEJLE1norDw8UfV_A&sensor=false"></script>
    <script type="text/javascript">
      var map;
      var geocoder;
      var markers = [];
      function geocodePostcodes() {
        // Clear existing markers
        for (var i = 0; i < markers.length; i++ ) {
          markers[i].setMap(null);
        }
        markers = [];
        // Add new markers
        var postcodes = document.getElementById('postcodes').value.split(',');
        for (var i = 0; i < postcodes.length; i++ ) {
          var postcode = postcodes[i].trim();
          if (postcode.length > 0) {
            console.log(postcode);
            geocoder.geocode({ 'address': postcode, 'region': 'uk' }, function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                var marker = new google.maps.Marker({
                  map: map,
                  position: results[0].geometry.location,
                });
                markers.push(marker);
              } else {
                alert('Geocoding was not successful for ' + postcode + ': ' + status);
              }
            });
          }
        }
      }
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(53.5,-3.0),
          zoom: 6,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          panControl: true,
          zoomControl: true,
          mapTypeControl: false,
          scaleControl: false,
          streetViewControl: false,
          overviewMapControl: false,
        };
        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
        geocoder = new google.maps.Geocoder();
        geocodePostcodes();
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="panel">
      <input id="postcodes" type="textbox" size="50" value="S2 3NH, PL5 1DE">
      <input type="button" value="Update Map" onclick="geocodePostcodes()">
    </div>
    <div id="map-canvas"/>
  </body>
</html>
